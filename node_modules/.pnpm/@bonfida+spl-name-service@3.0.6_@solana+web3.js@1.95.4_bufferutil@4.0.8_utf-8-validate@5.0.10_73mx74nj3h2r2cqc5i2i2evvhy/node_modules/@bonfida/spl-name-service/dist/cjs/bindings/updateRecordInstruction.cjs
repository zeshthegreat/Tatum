"use strict";var e=require("../instructions/deleteInstruction.cjs"),r=require("../instructions/updateInstruction.cjs"),t=require("../int.cjs"),c=require("../constants.cjs"),n=require("../utils/check.cjs"),o=require("../utils/getDomainKeySync.cjs"),s=require("../record/serializeRecord.cjs"),i=require("../types/record.cjs"),u=require("../error.cjs"),d=require("./createRecordInstruction.cjs");exports.updateRecordInstruction=async(a,l,R,j,p,q)=>{n.check(R!==i.Record.SOL,new u.UnsupportedRecordError("SOL record is not supported for this instruction"));const{pubkey:I}=o.getDomainKeySync(`${R}.${l}`,i.RecordVersion.V1),h=await a.getAccountInfo(I);n.check(!!(null==h?void 0:h.data),new u.AccountDoesNotExistError("The record account does not exist"));const y=s.serializeRecord(j,R);if((null==h?void 0:h.data.slice(96).length)!==y.length)return[e.deleteInstruction(c.NAME_PROGRAM_ID,I,q,p),await d.createRecordInstruction(a,l,R,j,p,q)];return r.updateInstruction(c.NAME_PROGRAM_ID,I,new t.Numberu32(0),y,p)};
//# sourceMappingURL=updateRecordInstruction.cjs.map

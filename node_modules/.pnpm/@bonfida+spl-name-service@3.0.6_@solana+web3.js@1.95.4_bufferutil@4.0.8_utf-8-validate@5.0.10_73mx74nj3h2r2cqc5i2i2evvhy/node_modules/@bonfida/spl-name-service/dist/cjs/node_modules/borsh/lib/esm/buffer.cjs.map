{"version":3,"file":"buffer.cjs","sources":["../../../../../../node_modules/borsh/lib/esm/buffer.js"],"sourcesContent":["var EncodeBuffer = /** @class */ (function () {\n    function EncodeBuffer() {\n        this.offset = 0;\n        this.buffer_size = 256;\n        this.buffer = new ArrayBuffer(this.buffer_size);\n        this.view = new DataView(this.buffer);\n    }\n    EncodeBuffer.prototype.resize_if_necessary = function (needed_space) {\n        if (this.buffer_size - this.offset < needed_space) {\n            this.buffer_size = Math.max(this.buffer_size * 2, this.buffer_size + needed_space);\n            var new_buffer = new ArrayBuffer(this.buffer_size);\n            new Uint8Array(new_buffer).set(new Uint8Array(this.buffer));\n            this.buffer = new_buffer;\n            this.view = new DataView(new_buffer);\n        }\n    };\n    EncodeBuffer.prototype.get_used_buffer = function () {\n        return new Uint8Array(this.buffer).slice(0, this.offset);\n    };\n    EncodeBuffer.prototype.store_value = function (value, type) {\n        var bSize = type.substring(1);\n        var size = parseInt(bSize) / 8;\n        this.resize_if_necessary(size);\n        var toCall = type[0] === 'f' ? \"setFloat\".concat(bSize) : type[0] === 'i' ? \"setInt\".concat(bSize) : \"setUint\".concat(bSize);\n        this.view[toCall](this.offset, value, true);\n        this.offset += size;\n    };\n    EncodeBuffer.prototype.store_bytes = function (from) {\n        this.resize_if_necessary(from.length);\n        new Uint8Array(this.buffer).set(new Uint8Array(from), this.offset);\n        this.offset += from.length;\n    };\n    return EncodeBuffer;\n}());\nexport { EncodeBuffer };\nvar DecodeBuffer = /** @class */ (function () {\n    function DecodeBuffer(buf) {\n        this.offset = 0;\n        this.buffer_size = buf.length;\n        this.buffer = new ArrayBuffer(buf.length);\n        new Uint8Array(this.buffer).set(buf);\n        this.view = new DataView(this.buffer);\n    }\n    DecodeBuffer.prototype.assert_enough_buffer = function (size) {\n        if (this.offset + size > this.buffer.byteLength) {\n            throw new Error('Error in schema, the buffer is smaller than expected');\n        }\n    };\n    DecodeBuffer.prototype.consume_value = function (type) {\n        var bSize = type.substring(1);\n        var size = parseInt(bSize) / 8;\n        this.assert_enough_buffer(size);\n        var toCall = type[0] === 'f' ? \"getFloat\".concat(bSize) : type[0] === 'i' ? \"getInt\".concat(bSize) : \"getUint\".concat(bSize);\n        var ret = this.view[toCall](this.offset, true);\n        this.offset += size;\n        return ret;\n    };\n    DecodeBuffer.prototype.consume_bytes = function (size) {\n        this.assert_enough_buffer(size);\n        var ret = this.buffer.slice(this.offset, this.offset + size);\n        this.offset += size;\n        return ret;\n    };\n    return DecodeBuffer;\n}());\nexport { DecodeBuffer };\n"],"names":["EncodeBuffer","this","offset","buffer_size","buffer","ArrayBuffer","view","DataView","prototype","resize_if_necessary","needed_space","Math","max","new_buffer","Uint8Array","set","get_used_buffer","slice","store_value","value","type","bSize","substring","size","parseInt","toCall","concat","store_bytes","from","length","DecodeBuffer","buf","assert_enough_buffer","byteLength","Error","consume_value","ret","consume_bytes"],"mappings":"aAAIA,IAAAA,EAA8B,WAC9B,SAASA,IACLC,KAAKC,OAAS,EACdD,KAAKE,YAAc,IACnBF,KAAKG,OAAS,IAAIC,YAAYJ,KAAKE,aACnCF,KAAKK,KAAO,IAAIC,SAASN,KAAKG,OAClC,CA0BA,OAzBAJ,EAAaQ,UAAUC,oBAAsB,SAAUC,GACnD,GAAIT,KAAKE,YAAcF,KAAKC,OAASQ,EAAc,CAC/CT,KAAKE,YAAcQ,KAAKC,IAAuB,EAAnBX,KAAKE,YAAiBF,KAAKE,YAAcO,GACrE,IAAIG,EAAa,IAAIR,YAAYJ,KAAKE,aACtC,IAAIW,WAAWD,GAAYE,IAAI,IAAID,WAAWb,KAAKG,SACnDH,KAAKG,OAASS,EACdZ,KAAKK,KAAO,IAAIC,SAASM,EAC7B,GAEJb,EAAaQ,UAAUQ,gBAAkB,WACrC,OAAO,IAAIF,WAAWb,KAAKG,QAAQa,MAAM,EAAGhB,KAAKC,SAErDF,EAAaQ,UAAUU,YAAc,SAAUC,EAAOC,GAClD,IAAIC,EAAQD,EAAKE,UAAU,GACvBC,EAAOC,SAASH,GAAS,EAC7BpB,KAAKQ,oBAAoBc,GACzB,IAAIE,EAAqB,MAAZL,EAAK,GAAa,WAAWM,OAAOL,GAAqB,MAAZD,EAAK,GAAa,SAASM,OAAOL,GAAS,UAAUK,OAAOL,GACtHpB,KAAKK,KAAKmB,GAAQxB,KAAKC,OAAQiB,GAAO,GACtClB,KAAKC,QAAUqB,GAEnBvB,EAAaQ,UAAUmB,YAAc,SAAUC,GAC3C3B,KAAKQ,oBAAoBmB,EAAKC,QAC9B,IAAIf,WAAWb,KAAKG,QAAQW,IAAI,IAAID,WAAWc,GAAO3B,KAAKC,QAC3DD,KAAKC,QAAU0B,EAAKC,QAEjB7B,CACX,CAjCkC,GAmC9B8B,EAA8B,WAC9B,SAASA,EAAaC,GAClB9B,KAAKC,OAAS,EACdD,KAAKE,YAAc4B,EAAIF,OACvB5B,KAAKG,OAAS,IAAIC,YAAY0B,EAAIF,QAClC,IAAIf,WAAWb,KAAKG,QAAQW,IAAIgB,GAChC9B,KAAKK,KAAO,IAAIC,SAASN,KAAKG,OAClC,CAqBA,OApBA0B,EAAatB,UAAUwB,qBAAuB,SAAUT,GACpD,GAAItB,KAAKC,OAASqB,EAAOtB,KAAKG,OAAO6B,WACjC,MAAM,IAAIC,MAAM,yDAGxBJ,EAAatB,UAAU2B,cAAgB,SAAUf,GAC7C,IAAIC,EAAQD,EAAKE,UAAU,GACvBC,EAAOC,SAASH,GAAS,EAC7BpB,KAAK+B,qBAAqBT,GAC1B,IAAIE,EAAqB,MAAZL,EAAK,GAAa,WAAWM,OAAOL,GAAqB,MAAZD,EAAK,GAAa,SAASM,OAAOL,GAAS,UAAUK,OAAOL,GAClHe,EAAMnC,KAAKK,KAAKmB,GAAQxB,KAAKC,QAAQ,GAEzC,OADAD,KAAKC,QAAUqB,EACRa,GAEXN,EAAatB,UAAU6B,cAAgB,SAAUd,GAC7CtB,KAAK+B,qBAAqBT,GAC1B,IAAIa,EAAMnC,KAAKG,OAAOa,MAAMhB,KAAKC,OAAQD,KAAKC,OAASqB,GAEvD,OADAtB,KAAKC,QAAUqB,EACRa,GAEJN,CACX,CA7BkC","x_google_ignoreList":[0]}
"use strict";var e=require("../constants.cjs");require("../node_modules/buffer/index.cjs");var r=require("../node_modules/@bonfida/sns-records/dist/index.cjs"),n=require("../types/record.cjs"),t=require("../error.cjs"),s=require("./getHashedNameSync.cjs"),c=require("./getNameAccountKeySync.cjs"),o=require("../_virtual/index.cjs");const i=(r,n=e.ROOT_DOMAIN_ACCOUNT,t)=>{let o=s.getHashedNameSync(r);return{pubkey:c.getNameAccountKeySync(o,t,n),hashed:o}};exports.getDomainKeySync=(s,c)=>{s.endsWith(".sol")&&(s=s.slice(0,-4));const u=c===n.RecordVersion.V2?r.CENTRAL_STATE_SNS_RECORDS:void 0,d=s.split(".");if(2===d.length){const e=o.__exports.Buffer.from([c||0]).toString().concat(d[0]),{pubkey:r}=i(d[1]);return{...i(e,r,u),isSub:!0,parent:r}}if(3===d.length&&c){const{pubkey:e}=i(d[2]),{pubkey:r}=i("\0".concat(d[1]),e),t=c===n.RecordVersion.V2?"":"";return{...i(t.concat(d[0]),r,u),isSub:!0,parent:e,isSubRecord:!0}}if(d.length>=3)throw new t.InvalidInputError("The domain is malformed");return{...i(s,e.ROOT_DOMAIN_ACCOUNT),isSub:!1,parent:void 0}};
//# sourceMappingURL=getDomainKeySync.cjs.map

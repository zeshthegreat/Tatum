"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.namehash = namehash;
var _labelhash = require("./labelhash");
var _ethEnsNamehash = _interopRequireDefault(require("@ensdomains/eth-ens-namehash"));
var _jsSha = require("js-sha3");
function namehash(inputName) {
  var node = '';
  for (var i = 0; i < 32; i++) {
    node += '00';
  }
  if (inputName) {
    var labels = inputName.split('.');
    for (var _i = labels.length - 1; _i >= 0; _i--) {
      var labelSha = void 0;
      if ((0, _labelhash.isEncodedLabelhash)(labels[_i])) {
        labelSha = (0, _labelhash.decodeLabelhash)(labels[_i]);
      } else {
        var normalisedLabel = _ethEnsNamehash["default"].normalize(labels[_i]);
        labelSha = (0, _jsSha.keccak_256)(normalisedLabel);
      }
      node = (0, _jsSha.keccak_256)(new Buffer.from(node + labelSha, 'hex'));
    }
  }
  return '0x' + node;
}